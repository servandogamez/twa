"use strict";(self.webpackChunkcore=self.webpackChunkcore||[]).push([[354],{1368:function(e,t,a){a.r(t),a.d(t,{ConfigurationModule:function(){return S}});var n=a(8335),i=a(1382),r=a(3324),s=a(1322),u=a(2741),o=a(6539),c=a(8467),l=a(6912),h=a(1633),d=a(4243),m=a(6662),g=a(1066),b=a(222),f=a(4477);const p=function(){return{max:255}};function T(e,t){1&e&&(u.TgZ(0,"small",15),u._uU(1,"\n                This field cannot be longer than 255 characters.\n              "),u.qZA()),2&e&&u.Q6J("translateValues",u.DdM(1,p))}function v(e,t){if(1&e&&(u.TgZ(0,"div"),u._uU(1,"\n              "),u.YNc(2,T,2,2,"small",14),u._uU(3,"\n            "),u.qZA()),2&e){const e=u.oxw();let t;u.xp6(2),u.Q6J("ngIf",null==(t=e.editForm.get("globalDashboard"))||null==t.errors?null:t.errors.maxlength)}}function U(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"button",16),u.NdJ("click",function(){return u.CHM(e),u.oxw().setActive(!0)}),u._uU(1,"\n          Deactivated\n            "),u.qZA()}}function _(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"button",17),u.NdJ("click",function(){return u.CHM(e),u.oxw().setActive(!1)}),u._uU(1,"\n            "),u._uU(2,"\n              Activated\n            "),u.qZA()}}function Z(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"div"),u._uU(1,"\n\n        "),u.TgZ(2,"div",4),u._uU(3,"\n          "),u.TgZ(4,"label",18),u._uU(5,"scheduletime"),u.qZA(),u._uU(6,"\n          "),u.TgZ(7,"input",19),u.NdJ("keypress",function(t){return u.CHM(e),u.oxw().checkNumberValue(t)})("focusout",function(t){return u.CHM(e),u.oxw().checkNumberValueblur(t)}),u.qZA(),u._uU(8," \n\n    \n        "),u.qZA(),u._uU(9,"\n\n        "),u.TgZ(10,"div",4),u._uU(11,"\n          "),u.TgZ(12,"label",20),u._uU(13,"scheduletime"),u.qZA(),u._uU(14,"\n          "),u.TgZ(15,"input",21),u.NdJ("keypress",function(t){return u.CHM(e),u.oxw().checkNumberValue2(t)})("focusout",function(t){return u.CHM(e),u.oxw().checkNumberValue2blur(t)}),u.qZA(),u._uU(16," \n\n    \n        "),u.qZA(),u._uU(17,"\n\n      "),u.qZA()}}const x={path:"config-update",component:(()=>{class e{constructor(e,t,a,n,i,s){this.service=e,this.fb=t,this.accountService=a,this.router=n,this.alertService=i,this.translate=s,this.status=!1,this.requiredCompany=!1,this.blockSome=!1,this.authorities=[],this.isSaving=!1,this.companies=[],this.errorNameExists=!1,this.editForm=this.fb.group({globalDashboard:["",[r.kI.required,r.kI.maxLength(255)]],nextTimeToSearch:[],scheduletime:[]})}ngOnInit(){this.accountService.hasAnyAuthority(s.W.SUPER_USER)?this.service.getAll().subscribe(e=>{for(let t=0;t<e.length;t++)"config.global.index"==e[t].key&&this.editForm.patchValue({globalDashboard:e[t].value}),"config.global.status"==e[t].key&&(this.status=!1,"true"==e[t].value&&(this.status=!0),"false"==e[t].value&&(this.status=!1)),"config.global.scheduletime"==e[t].key&&this.editForm.patchValue({scheduletime:e[t].value}),"config.global.nextTimeToSearch"==e[t].key&&this.editForm.patchValue({nextTimeToSearch:e[t].value})}):this.router.navigate(["/"])}save(){this.service.create(this.updateObject(this.data)).subscribe(()=>this.onSaveSuccess(),e=>this.onSaveError(e))}onSaveSuccess(){this.alertService.addAlert({type:"success",message:this.translate.instant("configManagement.update-success"),toast:!1}),this.isSaving=!1}onSaveError(e){this.isSaving=!1}noWhitespaceValidator(e){return!(0===(e&&e.value&&e.value.toString()||"").trim().length)}updateObject(e){return{dashboardG:this.editForm.get(["globalDashboard"]).value.trim(),status:this.status,scheduletime:this.editForm.get(["scheduletime"]).value,nextTimeToSearch:this.editForm.get(["nextTimeToSearch"]).value}}checkNumberValue(e){var t;return this.editForm.get(["scheduletime"]).value>999999&&this.editForm.patchValue({scheduletime:999999}),(t=e.charCode)>=48&&t<=57}checkNumberValue2(e){var t;return this.editForm.get(["nextTimeToSearch"]).value>999999&&this.editForm.patchValue({nextTimeToSearch:999999}),(t=e.charCode)>=48&&t<=57}checkNumberValue2blur(e){this.editForm.get(["nextTimeToSearch"]).value>999999&&this.editForm.patchValue({nextTimeToSearch:999999}),this.editForm.get(["nextTimeToSearch"]).value<60&&this.editForm.patchValue({nextTimeToSearch:60})}checkNumberValueblur(e){this.editForm.get(["scheduletime"]).value>999999&&this.editForm.patchValue({scheduletime:999999}),this.editForm.get(["scheduletime"]).value<60&&this.editForm.patchValue({scheduletime:60})}setActive(e){e&&(this.editForm.patchValue({scheduletime:60}),this.editForm.patchValue({nextTimeToSearch:60})),this.status=e}}return e.\u0275fac=function(t){return new(t||e)(u.Y36(o.I),u.Y36(r.qu),u.Y36(c.B),u.Y36(n.F0),u.Y36(l.c),u.Y36(h.sK))},e.\u0275cmp=u.Xpm({type:e,selectors:[["jhi-config-update"]],decls:48,vars:6,consts:[[1,"row","justify-content-center"],[1,"col-8"],["name","editForm","role","form","novalidate","",3,"formGroup","ngSubmit"],["id","myUserLabel","jhiTranslate","configManagement.add-update.update",1,"mdi","mdi-memory"],[1,"form-group",2,"margin-top","30px"],["jhiTranslate","configManagement.add-update.dashboardURL",1,"form-control-label"],["type","text","name","globalDashboard","formControlName","globalDashboard",1,"form-control"],[4,"ngIf"],["jhiTranslate","configManagement.add-update.status",1,"form-control-label"],["class","btn btn-danger btn-sm","jhiTranslate","streamManagement.deactivated",3,"click",4,"ngIf"],["class","btn btn-success btn-sm","jhiTranslate","streamManagement.active",3,"click",4,"ngIf"],["type","submit",1,"btn","btn-primary",3,"disabled"],["icon","save"],["jhiTranslate","entity.action.update"],["class","form-text text-danger","jhiTranslate","entity.validation.maxlength",3,"translateValues",4,"ngIf"],["jhiTranslate","entity.validation.maxlength",1,"form-text","text-danger",3,"translateValues"],["jhiTranslate","streamManagement.deactivated",1,"btn","btn-danger","btn-sm",3,"click"],["jhiTranslate","streamManagement.active",1,"btn","btn-success","btn-sm",3,"click"],["jhiTranslate","configManagement.add-update.scheduletime",1,"form-control-label"],["type","text","name","scheduletime","formControlName","scheduletime",1,"form-control",3,"keypress","focusout"],["jhiTranslate","configManagement.add-update.nextTimeToSearch",1,"form-control-label"],["type","text","name","nextTimeToSearch","formControlName","nextTimeToSearch",1,"form-control",3,"keypress","focusout"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0),u._uU(1,"\n    "),u.TgZ(2,"div",1),u._uU(3,"\n      "),u.TgZ(4,"form",2),u.NdJ("ngSubmit",function(){return t.save()}),u._uU(5,"\n        "),u.TgZ(6,"h2",3),u._uU(7,"Update Config"),u.qZA(),u._uU(8,"\n        "),u._UZ(9,"jhi-alert-error"),u._uU(10,"\n        "),u._UZ(11,"jhi-alert"),u._uU(12,"\n         \n          "),u.TgZ(13,"div",4),u._uU(14,"\n            "),u.TgZ(15,"label",5),u._uU(16,"globalDashboard"),u.qZA(),u._uU(17,"\n            "),u._UZ(18,"input",6),u._uU(19," \n  \n            "),u.YNc(20,v,4,1,"div",7),u._uU(21,"\n          "),u.qZA(),u._uU(22,"\n\n          "),u.TgZ(23,"div",4),u._uU(24,"\n            "),u.TgZ(25,"label",8),u._uU(26,"job status"),u.qZA(),u._uU(27,"\n            "),u.TgZ(28,"div"),u._uU(29,"\n                  "),u.YNc(30,U,2,0,"button",9),u._uU(31,"\n            "),u.YNc(32,_,3,0,"button",10),u._uU(33,"\n          "),u.qZA(),u._uU(34,"\n      "),u.qZA(),u._uU(35,"\n\n      "),u.YNc(36,Z,18,0,"div",7),u._uU(37,"\n\n\n          "),u.TgZ(38,"button",11),u._uU(39,"\n            "),u._UZ(40,"fa-icon",12),u._uU(41,"\xa0"),u.TgZ(42,"span",13),u._uU(43,"Update"),u.qZA(),u._uU(44,"\n          "),u.qZA(),u._uU(45,"\n      "),u.qZA(),u._uU(46,"\n    "),u.qZA(),u._uU(47,"\n  "),u.qZA()),2&e&&(u.xp6(4),u.Q6J("formGroup",t.editForm),u.xp6(16),u.Q6J("ngIf",t.editForm.get("globalDashboard").invalid&&(t.editForm.get("globalDashboard").dirty||t.editForm.get("globalDashboard").touched)),u.xp6(10),u.Q6J("ngIf",!t.status),u.xp6(2),u.Q6J("ngIf",t.status),u.xp6(4),u.Q6J("ngIf",t.status),u.xp6(2),u.Q6J("disabled",t.editForm.invalid||t.isSaving))},directives:[r._Y,r.JL,r.sg,d.P,m.A,g.w,r.Fj,r.JJ,r.u,b.O5,f.BN],styles:[""]}),e})(),data:{pageTitle:"configuration.title"}};let S=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=u.oAB({type:e}),e.\u0275inj=u.cJS({imports:[[i.m,n.Bz.forChild([x])]]}),e})()}}]);